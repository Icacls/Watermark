!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Watermark=e():t.Watermark=e()}(window,function(){return function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}return i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,n){"use strict";n.r(e);var i=function(t){return"string"==typeof t},a=function(t,e){var n=0;if("string"==typeof t)for(var r=0;r<t.length;r++)n+=t.charCodeAt(r)<128?e:1;return n};function c(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),void 0===e?i(t)?(this.set(),this.mount(t)):this.set(t):(this.set(e),this.mount(t))}var t,e,r;return t=n,(e=[{key:"draw",value:function(){this.init(),this.drawCanvas(),this.render(),this.observe()}},{key:"mount",value:function(t){return this.$el="string"==typeof t?document.querySelector(t):t,this.draw(),this}},{key:"set",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign(t,{textArray:["example"],fontSize:26,fontFamily:"serif",padding:25,lineHeight:-1,rotate:Math.PI/6,fontScale:.5,color:"#eeeeee"}),this.options=t,this}},{key:"init",value:function(){this.initFont(),this.initSize()}},{key:"initFont",value:function(){var t=this.options;this.options.font="".concat(t.fontSize,"px ").concat(t.fontFamily),-1===t.lineHeight&&(this.options.lineHeight=1.25*t.fontSize)}},{key:"initSize",value:function(){var r=this.options,t=r.textArray.reduce(function(t,e){var n=a(e,r.fontScale);return t<n?n:t},0)*r.fontSize+2*r.padding,e=r.textArray.length*r.lineHeight+2*r.padding,n=Math.abs(r.rotate),i=e*Math.sin(n)+t*Math.cos(n),o=e*Math.cos(n)+t*Math.sin(n);this.contentWidth=t,this.contentHeight=e,this.ctxWidth=Math.floor(i),this.ctxHeight=Math.floor(o)}},{key:"drawCanvas",value:function(){var t=document.createElement("canvas");if(t.width=this.ctxWidth,t.height=this.ctxHeight,t.getContext){var i=t.getContext("2d"),o=this.options;i.translate.apply(i,c(this.origin(this.rotate))),i.rotate(this.rotate),i.textAlign="start",i.textBaseline="top",i.font=o.font,i.fillStyle=o.color;var e=this.contentHeight,n=Math.abs(o.rotate),a=e*Math.cos(n)*Math.sin(n),r=Math.PI/2,s=(r+o.rotate)%r,u=-e*Math.sin(s)*Math.sin(s);o.textArray.forEach(function(t,e){var n=a+o.padding,r=e*o.lineHeight+u+o.padding;i.fillText(t,n,r)}),this.canvas=t}}},{key:"origin",value:function(t){var e=[0,0];return t<0&&t>-Math.PI/2&&(e=[0,this.height]),e}},{key:"render",value:function(){var t=this.canvas.toDataURL();this.$el.style.background="url(".concat(t,")"),this.background=this.$el.style.background}},{key:"observe",value:function(){var n=this;this.observer;var t=new MutationObserver(function(t,e){t.forEach(function(t){var e=t.target;e.style.background!==n.background&&(e.style.background=n.background)})});t.observe(this.$el,{attributes:!0,childList:!1,attributeFilter:["style"]}),this.observer=t}}])&&o(t.prototype,e),r&&o(t,r),n}();e.default=r}]).default});
//# sourceMappingURL=Watermark.min.js.map